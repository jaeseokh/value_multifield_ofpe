name: CI â€” R & Python smoke

on:
  push:
    branches: [ main, master ]
  pull_request:

jobs:
  r-smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: r-lib/actions/setup-r@v2
      - name: Install minimal deps
        run: |
          Rscript -e "install.packages(c('rmarkdown','yaml','ggplot2','cli','glue','fs','here','tibble','dplyr'), repos='https://cloud.r-project.org')"
      - name: Render tiny chunk (no heavy data)
        run: |
          Rscript -e "rmarkdown::render('0_set-up.Rmd', output_format='md_document', output_file='__tmp.md', quiet=TRUE)"

  py-smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Install pytest (extend later)
        run: |
          python -m pip install --upgrade pip
          pip install -q pytest
      - name: Run tests if present
        run: |
          if [ -d "python/tests" ]; then pytest -q python/tests || true; fi
